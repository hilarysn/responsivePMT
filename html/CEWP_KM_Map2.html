<style type="text/css">
    #map, #map_container {
        height: 500px;
        margin: auto;
        z-index: 50;
    }

    #map_loading {
        position: absolute;
        background: #ffffff;
        width: 350px;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        height: 120px;
        padding: 10px;
        color: #000000;
        margin: auto;
        font-family: "Segoe UI";
        font-size: 16px;
        text-align: center;
        vertical-align: middle;
        display: block;
        z-index: 51;
    }

    .popRow {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 16px;
        margin-bottom: 1px;
    }

    .popdata {
        height: 100%;
    }

    .popBox {
        position: relative;
        /*background: rgba(0, 0, 255, 0.8);*/ /*#0000ff;*/
        /*color: #ffffff;*/
        margin: 15px 0px;
        /*border: 2px solid black;*/
        width: 180px;
        cursor: pointer;
    }

    .highcharts-container {
        overflow: visible !important;
    }

    .highcharts-title {
        color: #000000 !important;
        fill: #000000 !important;
    }

    .chartpopup {
        background: rgba(255, 255, 255, 1);
        min-width: 125px;
    }

    .info-right {
        position: absolute;
        top: 0;
        right: 0;
    }

    .markerpanel {
        display: none;
        width: 240px;
        background-color: white;
        position: fixed;
        z-index: 50;
    }

    .panel-heading {
        position: relative;
    }

    .markerpanelclose {
        position: absolute;
        top: 0;
        right: 5px;
    }

    .alert {
        padding-left: 5px;
    }

    #legend {
        /*width: 120px;*/
        background: #fff;
        padding: 5px;
        margin: 5px;
        border: 2px solid #000;   
    }

    #legend .alert {
        float: left;
        padding-left: 5px;
        margin-left: 5px;
        min-width: 140px;
    }

    #legend .alert:first-child { margin-left: 0; }
</style>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4hnXlB4-RJzH8oHOl1v50lTGrDzI0PXg" type="text/javascript"></script>

<script language="javascript" type="text/javascript">
    SP.SOD.executeOrDelayUntilScriptLoaded(function () {
        var SLASH = "/";
        var tp1 = new String(window.location.protocol);
        var tp2 = new String(window.location.host);
        var tp3 = L_Menu_BaseUrl;
        var site = tp1 + SLASH + SLASH + tp2 + tp3;
        SP.SOD.registerSod('CEWP_KM_Map2.js', site + "/SiteAssets/js/CEWP_KM_Map2.js");
        EnsureScriptFunc("CEWP_KM_Map2.js", null, function () {
            CKO.KNOWLEDGEMAP.MAP.Map().Init(site);
        });
    }, "sp.js");
</script>

<div id="map" style="">
    <div id="map_loading">
        <table width='100%' align='center'>
            <tr><td align='center'><img src='/_layouts/images/gears_an.gif' /></td></tr>
            <tr><td align='center'><div style='margin-top: 10px; font-size: 16px;'>Getting Map Data...Please wait.</div></td></tr>
        </table>
    </div>
    <div id="map_container"></div>
</div>
<div id="MarkerPanel" class="markerpanel">
    <div class="panel panel-info">
        <div class="panel-heading"><button type="button" class="close markerpanelclose" onclick="CKO.KNOWLEDGEMAP.MAP.Map().closemarker()">&times;</button></div>
        <div class="panel-body">
            <div class="container-fluid" id="MarkerBody"></div>
        </div>
    </div>
</div>
<div id="legend">
    <div class="alert alert-info">Supported on site</div>
    <div class="alert alert-success">Supported by TRADOC HQ</div>
    <div class="alert alert-warning">TRADOC HQ</div>
    <div class="alert alert-danger">Not currently supported</div>
</div>